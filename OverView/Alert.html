<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø±ÛŒØ§Ø³Øª - Ø¨Ù†ÛŒØ§Ø¯ Ù…Ø³Ú©Ù† Ø§Ù†Ù‚Ù„Ø§Ø¨ Ø§Ø³Ù„Ø§Ù…ÛŒ</title>

  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-Variable-font-face.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg: #f4f7fb;
      --card: #ffffff;
      --text: #0b1a2b;
      --muted: #6b7280;
      --primary: #0b5ed7; /* Ø¢Ø¨ÛŒ ØªÛŒØ±Ù‡ */
      --accent: #4a77e5;  /* Ø¢Ø¨ÛŒ Ù…Ù„Ø§ÛŒÙ… */
      --success: #10b981; /* Ø³Ø¨Ø² */
      --warning: #f59e0b; /* Ø²Ø±Ø¯ */
      --danger: #ef4444; /* Ù‚Ø±Ù…Ø² */
      --glass: rgba(11,94,215,0.08);
      --border: rgba(11,94,215,0.12);
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:18px; font-family:"Vazirmatn",sans-serif;
      background:var(--bg); color:var(--text);
      -webkit-font-smoothing:antialiased;
    }

    /* header */
    .main-header{
      display:flex; gap:16px; align-items:center;
      justify-content:space-between; padding:16px 20px;
      background:linear-gradient(90deg,var(--card),var(--bg));
      border:1px solid var(--border);
      border-radius:12px;
      margin-bottom:20px;
    }
    .main-header .title{font-weight:900;color:var(--primary);font-size:1.4rem}
    .main-header .desc{color:var(--muted); font-size:0.95rem; margin-top:4px; }

    /* layout */
    .wrap{max-width:1300px;margin:0 auto;}
    .top-row{
      display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:16px; margin-bottom:20px;
    }

    /* gauge card */
    .card{
      background:var(--card); padding:16px; border-radius:12px;
      border:1px solid var(--border);
      box-shadow:0 8px 30px rgba(4,12,30,0.06);
      transition:transform .18s ease, box-shadow .18s ease;
      display:flex; flex-direction:column; align-items:center;
      position:relative;
    }
    .card:hover{ transform:translateY(-4px); box-shadow:0 18px 45px rgba(4,12,30,0.1); }
    .card .heading{font-weight:900;color:var(--text); margin-bottom:10px; width:100%; text-align:center; font-size:1.1rem; }
    .gauge-canvas{ width:200px; height:100px; } /* Ø§Ø¨Ø¹Ø§Ø¯ Ø«Ø§Ø¨Øª Ø¨Ø±Ø§ÛŒ Ø­ÙØ¸ Ù†Ø³Ø¨Øª Û²:Û± */
    .gauge-value{ margin-top:8px; font-weight:900; color:var(--text); font-size:1.2rem; }
    .gauge-target{ font-size:0.8rem; color:var(--muted); margin-top:4px;}

    /* compact chart area */
    .chart-area{
      background:var(--card); padding:20px; border-radius:12px;
      border:1px solid var(--border);
      box-shadow:0 8px 30px rgba(4,12,30,0.06);
      margin-bottom:20px;
    }
    .chart-top{ display:flex; justify-content:space-between; gap:12px; align-items:center; margin-bottom:12px; flex-wrap:wrap; }
    .chart-top h3{ margin:0; color:var(--primary); font-weight:900; font-size:1.2rem; }
    .select{ padding:8px 12px; border-radius:8px; border:2px solid var(--border); background:#fff; font-weight:700; color:var(--text); transition:border-color .2s; }
    .select:focus{ border-color:var(--primary); outline:none; }
    .chart-desc{ margin-top:12px; color:var(--muted); font-size:0.9rem; border-top:1px solid #eee; padding-top:10px; }

    /* **Ø¬Ø¯ÛŒØ¯: Ú©Ø§Ù†ØªÛŒÙ†Ø± Ù†Ù…ÙˆØ¯Ø§Ø± Ø³ØªÙˆÙ†ÛŒ Ø¨Ø§ Ø§Ø±ØªÙØ§Ø¹ Ø«Ø§Ø¨Øª** */
    .chart-container-bar {
      position: relative;
      height: 400px; /* Ø§Ø±ØªÙØ§Ø¹ Ø«Ø§Ø¨Øª Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ø´ Ø¢Ù…Ø¯Ù† */
      max-height: 400px;
    }

    /* dashboard grid of cards */
    .grid{
      display:grid; grid-template-columns:repeat(auto-fit,minmax(340px,1fr));
      gap:20px; margin-bottom:30px;
    }
    .card hr{ border:none; border-top:1px dashed #e0e7ff; margin:10px 0 12px; width:100%;}
    .card-content{ width:100%; }
    .card ul{ margin:0; padding:0; list-style:none; width:100%;}
    .card li{ margin-bottom:12px; line-height:1.6; color:var(--text); font-size:0.95rem; display:flex; align-items:flex-start; }
    .card li strong{ color:var(--primary); font-weight:800; margin-left:8px; flex-shrink:0; }
    .card li::before{ content:'â€¢'; color:var(--accent); font-size:1.2rem; margin-left:8px; line-height:1.4; }
    .status-badge{ display:inline-block; padding:7px 12px; border-radius:999px; font-weight:800; color:#fff; font-size:0.86rem; margin-bottom:10px; }
    .critical{ background:var(--danger); } .high{ background:var(--warning); color:#111; } .normal{ background:var(--primary);} .stable{ background:var(--success); }

    .meta{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; width:100%; border-top:1px solid #f3f4f6; padding-top:10px; }
    .pill{ background:var(--glass); padding:6px 12px; border-radius:999px; font-weight:700; color:var(--primary); border:1px solid var(--border); font-size:0.85rem; }

    /* Table Style */
    .data-table{ width:100%; border-collapse:collapse; margin-top:15px; font-size:0.9rem; }
    .data-table th, .data-table td{ padding:12px 10px; text-align:right; border-bottom:1px solid #f0f6ff; }
    .data-table th{ background:var(--glass); color:var(--primary); font-weight:800; position:sticky; top:0; }
    .data-table tbody tr:hover{ background:rgba(11,94,215,0.04); }
    .table-scroll{ max-height:400px; overflow-y:auto; border:1px solid var(--border); border-radius:10px; }
    .table-badge{ display:inline-block; padding:4px 8px; border-radius:6px; font-weight:700; font-size:0.8rem; }
    .b-critical{ background:var(--danger); color:#fff; } .b-high{ background:var(--warning); color:#111; } .b-normal{ background:var(--success); color:#fff; }

    /* responsive tweaks */
    @media (max-width:992px){ .top-row{ grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); } }
    @media (max-width:520px){ 
      body{ padding:10px } 
      .main-header{flex-direction:column;align-items:flex-start} 
      .gauge-canvas{ width:160px; height:80px } 
      .chart-top{flex-direction:column;align-items:flex-start} 
      .chart-container-bar { height: 300px; max-height: 300px; } /* Ø§Ø±ØªÙØ§Ø¹ Ú©Ù…ØªØ± Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="main-header" role="banner">
      <div>
        <div class="title">ğŸ”¥ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø±ÛŒØ§Ø³Øª Ø¨Ù†ÛŒØ§Ø¯ Ù…Ø³Ú©Ù† Ø§Ù†Ù‚Ù„Ø§Ø¨ Ø§Ø³Ù„Ø§Ù…ÛŒ</div>
        <div class="desc">Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ ÙÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ Ùˆ ØªØ¹Ø§Ù…Ù„Ø§Øª â€” <strong>Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ ÙØ±Ø¶ÛŒ Ùˆ Ø¬Ù‡Øª Ù†Ù…Ø§ÛŒØ´ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§</strong></div>
      </div>
      <div style="text-align:left;color:var(--muted);font-weight:700;font-size:0.9rem;">ØªØ§Ø±ÛŒØ® Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: Û±Û´Û°Ûµ/Û°Û¸/Û±Û± - Ø³Ø§Ø¹Øª Û²Û²:Û³Û°</div>
    </header>

    <section class="top-row" aria-label="Ú¯ÛŒØ¬ Ù‡Ø§ÛŒ Ù†ÛŒÙ… Ø¯Ø§ÛŒØ±Ù‡ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ">
      <div class="card">
        <div class="heading">Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ø¸Ø§Ø±ØªÛŒ (ÙÙˆØ±ÛŒØª)</div>
        <canvas id="gauge-monitor" class="gauge-canvas"></canvas>
        <div class="gauge-value" id="val-monitor">â€”</div>
        <div class="gauge-target">Ø³Ù‚Ù Ø¨Ø­Ø±Ø§Ù†: Û±Û°Û°Ùª</div>
      </div>

      <div class="card">
        <div class="heading">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ (Ø§Ø¬Ø±Ø§)</div>
        <canvas id="gauge-emergency" class="gauge-canvas"></canvas>
        <div class="gauge-value" id="val-emergency">â€”</div>
        <div class="gauge-target">Ù¾ÛŒØ´Ø±ÙØª Ù‡Ø¯Ù: Û¸ÛµÙª</div>
      </div>

      <div class="card">
        <div class="heading">Ù†Ù‡Ø¶Øª Ù…Ù„ÛŒ Ù…Ø³Ú©Ù† (ØªØ­Ù‚Ù‚)</div>
        <canvas id="gauge-nahzat" class="gauge-canvas"></canvas>
        <div class="gauge-value" id="val-nahzat">â€”</div>
        <div class="gauge-target">Ù‡Ø¯Ù Ø³Ø§Ù„: Û·Û°Ùª</div>
      </div>

      <div class="card">
        <div class="heading">Ø¨Ø­Ø±Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø·Ø¨ÛŒØ¹ÛŒ (Ù¾Ø§ÛŒØ´)</div>
        <canvas id="gauge-disasters" class="gauge-canvas"></canvas>
        <div class="gauge-value" id="val-disasters">â€”</div>
        <div class="gauge-target">Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ Ø´Ø±ÙˆØ¹ Ø´Ø¯Ù‡: Û¸Û°Ùª</div>
      </div>

      <div class="card">
        <div class="heading">Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§ÛŒ ØªØ§Ø¨Ø¹Ù‡ (Ø±ÙˆÙ†Ø¯)</div>
        <canvas id="gauge-companies" class="gauge-canvas"></canvas>
        <div class="gauge-value" id="val-companies">â€”</div>
        <div class="gauge-target">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù…Ø§Ù„ÛŒ: Û¶Û°Ùª</div>
      </div>
    </section>

    <section class="chart-area" aria-label="Ù†Ù…ÙˆØ¯Ø§Ø± Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù¾Ø±ÙˆÚ˜Ù‡">
      <div class="chart-top">
        <h3>ğŸ“ˆ Ù…Ù‚Ø§ÛŒØ³Ù‡ ÙØ¹Ø§Ù„ÛŒØª Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ (ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡)</h3>
        <div style="display:flex;gap:8px;align-items:center">
          <label for="projectSelect" style="font-weight:800;color:var(--muted);margin-left:6px">Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø±ÙˆÚ˜Ù‡:</label>
          <select id="projectSelect" class="select"></select>
        </div>
      </div>
      
      <div class="chart-container-bar">
        <canvas id="provinceBar"></canvas>
      </div>

      <div class="chart-desc">Ù…Ø­ÙˆØ± Ø§ÙÙ‚ÛŒ: Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ (Ø¨ÛŒØ´ Ø§Ø² Û±Û² Ø§Ø³ØªØ§Ù† Ù¾Ø±Ú©Ø§Ø±) â€” Ù…Ø­ÙˆØ± Ø¹Ù…ÙˆØ¯ÛŒ: ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ ÛŒØ§ Ù…Ø±ØªØ¨Ø·</div>
    </section>

    <section class="chart-area" aria-label="Ø¬Ø¯ÙˆÙ„ ÙˆØ¶Ø¹ÛŒØª Ø¬Ø²Ø¦ÛŒØ§Øª Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§">
      <div class="chart-top">
        <h3>ğŸ“‹ ÙˆØ¶Ø¹ÛŒØª Ù¾ÛŒØ´Ø±ÙØª Ùˆ ÙÙˆØ±ÛŒØª Ú©Ù„ÛŒ Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§</h3>
        <div style="display:flex;gap:8px;align-items:center">
          <label for="statusFilter" style="font-weight:800;color:var(--muted);margin-left:6px">ÙÛŒÙ„ØªØ± ÙˆØ¶Ø¹ÛŒØª:</label>
          <select id="statusFilter" class="select">
            <option value="all">Ù‡Ù…Ù‡ Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§</option>
            <option value="critical">Ø¨Ø­Ø±Ø§Ù†ÛŒ</option>
            <option value="high">Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§Ù„Ø§</option>
            <option value="normal">Ø¹Ø§Ø¯ÛŒ</option>
          </select>
        </div>
      </div>
      <div class="table-scroll">
        <table class="data-table">
          <thead>
            <tr>
              <th>Ø§Ø³ØªØ§Ù†</th>
              <th>Ù¾ÛŒØ´Ø±ÙØª Ù†Ù‡Ø¶Øª Ù…Ù„ÛŒ</th>
              <th>ØªØ¹Ø¯Ø§Ø¯ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ</th>
              <th>Ù…Ø´Ú©Ù„ Ù…Ø§Ù„ÛŒ (Ùª)</th>
              <th>ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ</th>
            </tr>
          </thead>
          <tbody id="provinceTableBody"></tbody>
        </table>
      </div>
    </section>

    <section class="grid" aria-label="Ú©Ø§Ø±ØªÙ‡Ø§ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ùˆ ÙÙˆØ±ÛŒØªâ€ŒÙ‡Ø§">
      <div class="card">
        <h4 class="heading">ğŸ§¾ Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ø¸Ø§Ø±ØªÛŒ</h4>
        <div class="card-content">
          <span class="status-badge critical">ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ ÙÙˆØ±ÛŒ: Û± Ù…ÙˆØ±Ø¯</span>
          <hr>
          <ul>
            <li><strong>Ø¯ÛŒÙˆØ§Ù† Ù…Ø­Ø§Ø³Ø¨Ø§Øª:</strong> Ø¨Ø±Ø±Ø³ÛŒ ØªØ£Ø®ÛŒØ± Ù¾Ø±Ø¯Ø§Ø®Øª ØªØ³Ù‡ÛŒÙ„Ø§Øª Ù†Ù‡Ø¶Øª Ù…Ù„ÛŒ Ø¯Ø± Ûµ Ø§Ø³ØªØ§Ù†. (Ù…Ù‡Ù„Øª: Û´Û¸ Ø³Ø§Ø¹Øª)</li>
            <li><strong>Ø³Ø§Ø²Ù…Ø§Ù† Ø¨Ø§Ø²Ø±Ø³ÛŒ:</strong> Ù…ØºØ§ÛŒØ±Øª Ø¯Ø± ØªØ®ØµÛŒØµ Ø²Ù…ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ Ù…Ù†Ø§Ø·Ù‚ Ø²Ù„Ø²Ù„Ù‡â€ŒØ²Ø¯Ù‡.</li>
            <li><strong>Ú©Ù…ÛŒØ³ÛŒÙˆÙ† Ø§ØµÙ„ Û¹Û°:</strong> Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´ÙØ§Ùâ€ŒØ³Ø§Ø²ÛŒ Ù†Ø­ÙˆÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Û² Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ú©Ù„Ø§Ù† Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ø®Ø±Ø§Ø³Ø§Ù†.</li>
          </ul>
          <div class="meta"><div class="pill">Ù…ÙˆØ§Ø±Ø¯ Ù¾Ø§ÛŒØ´ ÙØ¹Ø§Ù„: Û´</div><div class="pill">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ø¶Ø·Ø±Ø§Ø±: Û¸Û¸Ùª</div><div class="pill">Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§: Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯</div></div>
        </div>
      </div>

      <div class="card">
        <h4 class="heading">ğŸ›ï¸ Ù…Ø¬Ù„Ø³ Ùˆ ØªØ¹Ø§Ù…Ù„Ø§Øª Ù¾Ø§Ø±Ù„Ù…Ø§Ù†ÛŒ</h4>
        <div class="card-content">
          <span class="status-badge high">Ø¯Ø± Ø§ÙˆÙ„ÙˆÛŒØª: Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª</span>
          <hr>
          <ul>
            <li><strong>Ú©Ù…ÛŒØ³ÛŒÙˆÙ† Ø¹Ù…Ø±Ø§Ù†:</strong> Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¢Ù…Ø§Ø± ØªÙÚ©ÛŒÚ©ÛŒ Ùˆ ØªØ­ÙˆÛŒÙ„ Ù…Ø³Ú©Ù† Ø±ÙˆØ³ØªØ§ÛŒÛŒ Ø¯Ø± Û¶ Ù…Ø§Ù‡ Ø§Ø®ÛŒØ±.</li>
            <li><strong>Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† (Ù„Ø±Ø³ØªØ§Ù†/Ú©Ø±Ù…Ø§Ù†Ø´Ø§Ù‡):</strong> Ù¾ÛŒÚ¯ÛŒØ±ÛŒ ØªØ£Ù…ÛŒÙ† Ø§Ø¹ØªØ¨Ø§Ø± Ùˆ Ù…Ø³Ø§Ø¦Ù„ Ø§Ø±Ø§Ø¶ÛŒ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ù‡Ø§Ø¯ÛŒ.</li>
            <li><strong>Ù†Ø§ÛŒØ¨ Ø±Ø¦ÛŒØ³:</strong> Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ø¶ÙˆØ± Ø¯Ø± Ø¬Ù„Ø³Ù‡ Ø¹Ù„Ù†ÛŒ Ø¢ØªÛŒ.</li>
          </ul>
          <div class="meta"><div class="pill">Ù¾ÛŒÚ¯ÛŒØ±ÛŒâ€ŒÙ‡Ø§: Ûµ</div><div class="pill">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ÙÙˆØ±ÛŒØª: Û·ÛµÙª</div><div class="pill">Ø¢Ø®Ø±ÛŒÙ† Ø§Ø±ØªØ¨Ø§Ø·: Ø§Ù…Ø±ÙˆØ²</div></div>
        </div>
      </div>

      <div class="card">
        <h4 class="heading">ğŸ¢ Ø¯ÙˆÙ„Øª Ùˆ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±ÛŒâ€ŒÙ‡Ø§ (Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ)</h4>
        <div class="card-content">
          <span class="status-badge high">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø§Ø³Ø®: Û² Ù…ÙˆØ±Ø¯ Ú©Ù„Ø§Ù†</span>
          <hr>
          <ul>
            <li><strong>Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø± (Ø³ÛŒØ³ØªØ§Ù†):</strong> Ù†Ø§Ù…Ù‡ Ø±Ø³Ù…ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ³Ø±ÛŒØ¹ Ø¯Ø± Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø³ÛŒÙ„â€ŒØ²Ø¯Ù‡.</li>
            <li><strong>Ù…Ø¹Ø§ÙˆÙ† Ø§ÙˆÙ„:</strong> Ù‚Ø±Ø§Ø± Ø¬Ù„Ø³Ù‡ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø¯Ø± Ù…ÙˆØ±Ø¯ ØªØ®ØµÛŒØµ Ø¨ÙˆØ¯Ø¬Ù‡ Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ Û¹ Ø§Ø³ØªØ§Ù†.</li>
            <li><strong>Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø± (ÙØ§Ø±Ø³):</strong> ØªØ£ÛŒÛŒØ¯ ÙˆØ§Ú¯Ø°Ø§Ø±ÛŒ Û²Û° Ù‡Ú©ØªØ§Ø± Ø²Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ù†Ù‡Ø¶Øª Ù…Ù„ÛŒ.</li>
          </ul>
          <div class="meta"><div class="pill">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„: Û²Û³</div><div class="pill">ØªØ£ÛŒÛŒØ¯ÛŒÙ‡â€ŒÙ‡Ø§: Ûµ</div><div class="pill">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ÙÙˆØ±ÛŒØª: Û¶Û²Ùª</div></div>
        </div>
      </div>

      <div class="card">
        <h4 class="heading">ğŸ“° Ø±Ø³Ø§Ù†Ù‡â€ŒÙ‡Ø§ Ùˆ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ (Ù¾Ø§ÛŒØ´)</h4>
        <div class="card-content">
          <span class="status-badge high">Ù¾Ø§ÛŒØ´ ÙÙˆØ±ÛŒ: Ø§ÙØ²Ø§ÛŒØ´ Ù…Ù†ÙÛŒ</span>
          <hr>
          <ul>
            <li><strong>Ø®Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒâ€ŒÙ‡Ø§:</strong> ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ø±ÙˆÛŒ ØªØ£Ø®ÛŒØ± Ø³Ø§Ø®Øª Ø¯Ø± Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¨Ø§Ø±Ø´ (Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†/Ú¯ÛŒÙ„Ø§Ù†).</li>
            <li><strong>Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ:</strong> Ø§ÙØ²Ø§ÛŒØ´ Û±Û°Ùª ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù†ÙÛŒ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ú©ÛŒÙÛŒØª Ø³Ø§Ø®Øª (Ù¾Ø±ÙˆÚ˜Ù‡ Ø§ØµÙÙ‡Ø§Ù†).</li>
            <li>**Ø³Ø®Ù†Ú¯Ùˆ:** Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨ÛŒØ§Ù†ÛŒÙ‡ Ø´ÙØ§Ùâ€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Ù…ÙˆØ±Ø¯ ØªØ³Ù‡ÛŒÙ„Ø§Øª.</li>
          </ul>
          <div class="meta"><div class="pill">Ø°Ù‡Ù†ÛŒØª Ø¹Ù…ÙˆÙ…ÛŒ: Ø­Ø³Ø§Ø³ (Û·Û±Ùª)</div><div class="pill">Ù¾Ø§Ø³Ø® Ø±Ø³Ø§Ù†Ù‡â€ŒØ§ÛŒ: ÙØ¹Ø§Ù„</div></div>
        </div>
      </div>
    </section>
  </div>

  <script>
  /************************************************************************
   * Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±Ø¶ÛŒ Ù…Ø¨Ø³ÙˆØ·
   *************************************************************************/
  const provinces = [
    'ØªÙ‡Ø±Ø§Ù†', 'Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ', 'ÙØ§Ø±Ø³', 'Ø§ØµÙÙ‡Ø§Ù†', 'Ø®ÙˆØ²Ø³ØªØ§Ù†', 'Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† Ø´Ø±Ù‚ÛŒ',
    'Ù„Ø±Ø³ØªØ§Ù†', 'Ø³ÛŒØ³ØªØ§Ù† Ùˆ Ø¨Ù„ÙˆÚ†Ø³ØªØ§Ù†', 'Ú¯ÛŒÙ„Ø§Ù†', 'Ú©Ø±Ù…Ø§Ù†', 'Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†', 'Ú©Ø±Ù…Ø§Ù†Ø´Ø§Ù‡',
    'Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† ØºØ±Ø¨ÛŒ', 'Ù‚Ø²ÙˆÛŒÙ†', 'ÛŒØ²Ø¯'
  ];

  // Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§: ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§/ÙˆØ§Ø­Ø¯Ù‡Ø§
  const projectsData = {
    'Ù†Ù‡Ø¶Øª Ù…Ù„ÛŒ Ù…Ø³Ú©Ù† (ÙˆØ§Ø­Ø¯)':      [420, 180, 210, 240, 120, 150, 95, 60, 130, 70, 110, 90, 85, 55, 75],
    'Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ Ùˆ Ø¨Ù‡Ø³Ø§Ø²ÛŒ (ÙˆØ§Ø­Ø¯)':  [120, 220, 80, 150, 190, 110, 180, 140, 75, 60, 95, 160, 130, 65, 80],
    'Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ù‡Ø§Ø¯ÛŒ Ø±ÙˆØ³ØªØ§ÛŒÛŒ':    [80, 60, 75, 50, 40, 45, 130, 160, 55, 30, 90, 70, 40, 25, 35],
    'Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ø±Ø§Ù†ÛŒ Ø²ÛŒØ±Ø¨Ù†Ø§ÛŒÛŒ':[60, 110, 95, 130, 210, 70, 50, 40, 120, 100, 85, 140, 115, 80, 90],
    'Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ ÙØ¹Ø§Ù„':   [25, 40, 18, 30, 55, 22, 48, 92, 28, 14, 35, 44, 38, 10, 12],
    'Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ':    [70, 95, 60, 80, 110, 55, 45, 38, 72, 50, 66, 88, 78, 48, 55],
    'Ù†Ø¸Ø§Ø±Øª ÙÙ†ÛŒ Ùˆ Ú©Ù†ØªØ±Ù„ Ú©ÛŒÙÛŒØª':[150, 200, 120, 180, 160, 140, 100, 80, 110, 90, 130, 150, 100, 70, 95]
  };
  const projectKeys = Object.keys(projectsData);

  // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ ÙˆØ¶Ø¹ÛŒØª Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§
  const provinceStatusData = [
    { name: 'ØªÙ‡Ø±Ø§Ù†', nahzat: 65, emergency: 25, finance: 75, status: 'high' },
    { name: 'Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ', nahzat: 88, emergency: 40, finance: 50, status: 'normal' },
    { name: 'ÙØ§Ø±Ø³', nahzat: 72, emergency: 18, finance: 60, status: 'normal' },
    { name: 'Ø§ØµÙÙ‡Ø§Ù†', nahzat: 55, emergency: 30, finance: 80, status: 'high' },
    { name: 'Ø®ÙˆØ²Ø³ØªØ§Ù†', nahzat: 45, emergency: 55, finance: 92, status: 'critical' },
    { name: 'Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† Ø´Ø±Ù‚ÛŒ', nahzat: 80, emergency: 22, finance: 55, status: 'normal' },
    { name: 'Ù„Ø±Ø³ØªØ§Ù†', nahzat: 50, emergency: 48, finance: 85, status: 'critical' },
    { name: 'Ø³ÛŒØ³ØªØ§Ù† Ùˆ Ø¨Ù„ÙˆÚ†Ø³ØªØ§Ù†', nahzat: 35, emergency: 92, finance: 95, status: 'critical' },
    { name: 'Ú¯ÛŒÙ„Ø§Ù†', nahzat: 60, emergency: 28, finance: 70, status: 'high' },
    { name: 'Ú©Ø±Ù…Ø§Ù†', nahzat: 78, emergency: 14, finance: 45, status: 'normal' },
    { name: 'Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†', nahzat: 68, emergency: 35, finance: 65, status: 'high' },
    { name: 'Ú©Ø±Ù…Ø§Ù†Ø´Ø§Ù‡', nahzat: 52, emergency: 44, finance: 78, status: 'high' },
    { name: 'Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† ØºØ±Ø¨ÛŒ', nahzat: 70, emergency: 38, finance: 58, status: 'normal' },
    { name: 'Ù‚Ø²ÙˆÛŒÙ†', nahzat: 90, emergency: 10, finance: 30, status: 'normal' },
    { name: 'ÛŒØ²Ø¯', nahzat: 85, emergency: 12, finance: 40, status: 'normal' }
  ];

  // Ù…Ù‚Ø§Ø¯ÛŒØ± Ú¯ÛŒØ¬â€ŒÙ‡Ø§ (Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª/ØªØ­Ù‚Ù‚/ÙÙˆØ±ÛŒØª)
  const gaugeValues = {
    'monitor': 88,      
    'emergency': 72,    
    'nahzat': 64,       
    'disasters': 78,    
    'companies': 46     
  };

  /************************************************************************
   * ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ (Ø§ØµÙ„Ø§Ø­â€ŒØ´Ø¯Ù‡)
   *************************************************************************/
  // ØªØ¹ÛŒÛŒÙ† Ø±Ù†Ú¯ Ú¯ÛŒØ¬ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù‚Ø¯Ø§Ø± (Ù‚Ø±Ù…Ø²-Ø²Ø±Ø¯-Ø³Ø¨Ø²)
  // Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ (HEX/RGBA) ØªØ§ canvas Ùˆ Chart.js Ø¨Ø¯ÙˆÙ† Ù…Ø´Ú©Ù„ Ú©Ø§Ø± Ú©Ù†Ø¯
  function getGaugeColor(value){
    if(value >= 75) return '#ef4444'; // var(--danger)
    if(value >= 50) return '#f59e0b'; // var(--warning)
    return '#10b981';                 // var(--success)
  }

  function getGlassColor(){
    return 'rgba(11,94,215,0.08)'; // var(--glass)
  }

  function blueShade(i, total){
    const base = [11,94,215];
    const factor = 0.95 - (i/total)*0.6;
    const r = Math.round(base[0]*factor + 240*(1-factor));
    const g = Math.round(base[1]*factor + 245*(1-factor));
    const b = Math.round(base[2]*factor + 250*(1-factor));
    return `rgb(${r},${g},${b})`;
  }

  /************************************************************************
   * Ú¯ÙÛŒØ¬â€ŒÙ‡Ø§ÛŒ Ù†ÛŒÙ…â€ŒØ¯Ø§ÛŒØ±Ù‡ (Chart.js doughnut)
   *************************************************************************/
  const centerTextPlugin = {
    id: 'centerText',
    beforeDraw(chart){
      if(chart.config.type !== 'doughnut') return;
      const value = chart.options.plugins.centerText && chart.options.plugins.centerText.value;
      if (typeof value === 'undefined') return;
      const ctx = chart.ctx;
      const w = chart.width, h = chart.height;
      ctx.save();
      ctx.font = '900 18px Vazirmatn, sans-serif';
      ctx.fillStyle = getGaugeColor(value); // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±Ù†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      // Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…ØªÙ† Ø±Ø§ Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ canvas ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… (Ù†Ø³Ø¨Øª 0.62 Ø¨Ø±Ø§ÛŒ Ù†ÛŒÙ…â€ŒØ¯Ø§ÛŒØ±Ù‡ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª)
      ctx.fillText(value + '%', w/2, h*0.62);
      ctx.restore();
    }
  };
  Chart.register(centerTextPlugin);

  // Ø§ÛŒØ¬Ø§Ø¯ ÛŒÚ© gauge Ù†ÛŒÙ… Ø¯Ø§ÛŒØ±Ù‡
  function createHalfGauge(ctxId, value){
    const color = getGaugeColor(value);
    const glass = getGlassColor();
    const canvas = document.getElementById(ctxId);
    if(!canvas) return null;
    const ctx = canvas.getContext('2d');
    // Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ Ø¯Ø± Ø§Ù„Ù…Ø§Ù† Ù…ØªÙ†ÛŒ Ø²ÛŒØ± Ù†Ø´Ø§Ù† Ø¨Ø¯Ù‡
    const shortId = ctxId.split('-')[1]; // gauge-monitor -> monitor
    const valEl = document.getElementById(`val-${shortId}`);
    if(valEl) valEl.textContent = value + '%';

    const data = {
      datasets: [{
        data: [value, 100 - value],
        backgroundColor: [color, glass],
        borderWidth: 0,
        cutout: '80%'
      }]
    };

    const chart = new Chart(ctx, {
      type: 'doughnut',
      data,
      options: {
        rotation: -Math.PI,
        circumference: Math.PI,
        responsive: true,
        maintainAspectRatio: true,
        aspectRatio: 2, // Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ CSS (Ø¹Ø±Ø¶:Ø§Ø±ØªÙØ§Ø¹ = 2:1)
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false },
          centerText: { value: value }
        }
      }
    });

    return chart;
  }

  // Ø³Ø§Ø®Øª Ú¯ÛŒØ¬â€ŒÙ‡Ø§ (Ù†Ú¯Ù‡ Ø¯Ø§Ø´ØªÙ† Ø¢Ø¨Ø¬Ú©Øªâ€ŒÙ‡Ø§ Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Ù…Ø±Ø¬Ø¹ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¢Ù¾Ø¯ÛŒØª Ø¨Ø¹Ø¯ÛŒ)
  const gaugeCharts = {
    monitor: createHalfGauge('gauge-monitor', gaugeValues.monitor),
    emergency: createHalfGauge('gauge-emergency', gaugeValues.emergency),
    nahzat: createHalfGauge('gauge-nahzat', gaugeValues.nahzat),
    disasters: createHalfGauge('gauge-disasters', gaugeValues.disasters),
    companies: createHalfGauge('gauge-companies', gaugeValues.companies)
  };

  /************************************************************************
   * Ù†Ù…ÙˆØ¯Ø§Ø± Ø³ØªÙˆÙ†ÛŒ Ù¾ÙˆÛŒØ§ (Chart.js)
   *************************************************************************/
  const colors = provinces.map((_,i) => blueShade(i, provinces.length));

  // Ù¾Ø± Ú©Ø±Ø¯Ù† Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¯Ø± dropdown
  const sel = document.getElementById('projectSelect');
  projectKeys.forEach(k=>{
    const opt = document.createElement('option');
    opt.value = k; opt.textContent = k;
    sel.appendChild(opt);
  });

  // Ø¯Ø§Ø¯Ù‡ Ø§ÙˆÙ„ÛŒÙ‡ (Ø§ÙˆÙ„ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡)
  const initialKey = projectKeys[0];
  const initialData = projectsData[initialKey];

  const ctxBar = document.getElementById('provinceBar').getContext('2d');
  const barChart = new Chart(ctxBar, {
    type: 'bar',
    data: {
      labels: provinces,
      datasets: [{
        label: initialKey,
        data: initialData,
        backgroundColor: colors,
        borderRadius: 8,
        barThickness: 24
      }]
    },
    options: {
      indexAxis: 'x',
      responsive: true,
      maintainAspectRatio: false, // Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª Ú†ÙˆÙ† ÙˆØ§Ù„Ø¯ Ø§Ø±ØªÙØ§Ø¹ Ø«Ø§Ø¨Øª Ø¯Ø§Ø±Ø¯
      plugins: {
        legend: { display: false },
        tooltip: {
          rtl: true,
          callbacks: {
            title: ctx => ctx[0].label,
            label: ctx => ` ${ctx.dataset.label}: ${ctx.parsed.y.toLocaleString('fa-IR')} ÙˆØ§Ø­Ø¯/Ù¾Ø±ÙˆÚ˜Ù‡`
          }
        },
        title: { display: false }
      },
      scales: {
        x: {
          ticks: { color: 'var(--text)', font: { family: 'Vazirmatn', weight: '700' } },
          grid: { display: false }
        },
        y: {
          beginAtZero: true,
          ticks: { color: 'var(--muted)', font: { family: 'Vazirmatn' }, callback: value => value.toLocaleString('fa-IR') },
          grid: { color: 'var(--border)' }
        }
      }
    }
  });

  // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø± (Event Listener)
  sel.addEventListener('change', e=>{
    const key = e.target.value;
    const newData = projectsData[key];
    barChart.data.datasets[0].data = newData;
    barChart.data.datasets[0].label = key;
    barChart.update();
  });

  sel.value = initialKey;

  /************************************************************************
   * Ø¬Ø¯ÙˆÙ„ ÙˆØ¶Ø¹ÛŒØª Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§
   *************************************************************************/
  function getStatusBadge(status){
    let text = '', className = '';
    if(status === 'critical'){ text = 'Ø¨Ø­Ø±Ø§Ù†ÛŒ'; className = 'b-critical'; }
    else if(status === 'high'){ text = 'Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§Ù„Ø§'; className = 'b-high'; }
    else { text = 'Ø¹Ø§Ø¯ÛŒ/Ù¾Ø§ÛŒØ¯Ø§Ø±'; className = 'b-normal'; }
    return `<span class="table-badge ${className}">${text}</span>`;
  }

  function renderTable(filter = 'all'){
    const tbody = document.getElementById('provinceTableBody');
    tbody.innerHTML = '';

    const filteredData = filter === 'all'
      ? provinceStatusData
      : provinceStatusData.filter(d => d.status === filter);

    filteredData.forEach(d => {
      const row = tbody.insertRow();
      row.setAttribute('data-status', d.status);

      const c0 = row.insertCell(); c0.textContent = d.name;
      const c1 = row.insertCell(); c1.textContent = d.nahzat.toLocaleString('fa-IR') + 'Ùª';
      const c2 = row.insertCell(); c2.textContent = d.emergency.toLocaleString('fa-IR');
      const c3 = row.insertCell(); c3.textContent = d.finance.toLocaleString('fa-IR') + 'Ùª';
      const c4 = row.insertCell(); c4.innerHTML = getStatusBadge(d.status);
    });
  }

  // ÙÛŒÙ„ØªØ± Ø¬Ø¯ÙˆÙ„
  document.getElementById('statusFilter').addEventListener('change', e => {
    renderTable(e.target.value);
  });

  // Ù†Ù…Ø§ÛŒØ´ Ø¬Ø¯ÙˆÙ„ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
  renderTable('all');

  </script>
</body>
</html>
