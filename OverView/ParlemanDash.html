<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฏุงุดุจูุฑุฏ ุงุณุชุฑุงุชฺฺฉ ุชุนุงูู ุจุง ููุงูุฏฺฏุงู - ุจูุงุฏ ูุณฺฉู</title>
    <!-- Load Vazirmatn font for professional RTL display -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100..900&display=swap');
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f0f4f8; /* Light Blue-Gray background */
        }
        .card-shadow {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); /* Stronger, softer shadow */
            transition: all 0.3s ease;
        }
        .rep-card img {
            width: 72px;
            height: 72px;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid #6366f1; /* Indigo border */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .kpi-card {
            background-color: white;
            padding: 1.25rem;
            border-radius: 1.5rem; /* More rounded corners */
            border-bottom: 5px solid;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100px;
        }
        canvas {
            max-height: 350px !important;
        }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="p-6 md:p-10">
    <div class="max-w-8xl mx-auto space-y-10">

        <!-- Executive Header -->
        <header class="bg-indigo-800 p-8 rounded-3xl card-shadow border-t-8 border-yellow-400">
            <h1 class="text-4xl font-extrabold text-white text-center mb-2">
                ๐ ุฏุงุดุจูุฑุฏ ุงุณุชุฑุงุชฺฺฉ ุชุนุงูู ุจุง ููุงูุฏฺฏุงู ูุฌูุณ 
            </h1>
            <p class="text-indigo-200 text-center text-lg">ุชุญูู ุฌุงูุน ูุนุงูุชโูุงุ ุงูููุชโูุง ู ููุงุถุน ููุงูุฏฺฏุงู ุฏุฑ ุงุฑุชุจุงุท ุจุง ุจูุงุฏ ูุณฺฉู</p>
        </header>

        <!-- Section 1: KPI Row -->
        <section class="grid grid-cols-2 md:grid-cols-6 gap-6">
            <div class="kpi-card border-indigo-500 text-center card-shadow"><p class="text-sm text-gray-500">ุชุนุฏุงุฏ ฺฉู ุชุนุงููุงุช (ูุงู)</p><p class="text-4xl font-extrabold text-indigo-700">ณดต</p></div>
            <div class="kpi-card border-green-500 text-center card-shadow"><p class="text-sm text-gray-500">ุชุนุงููุงุช ุญูุงุช/ูุซุจุช</p><p class="text-4xl font-extrabold text-green-600">ถธูช</p></div>
            <div class="kpi-card border-red-500 text-center card-shadow"><p class="text-sm text-gray-500">ุชุนุงููุงุช ูพุฑุฑุณฺฉ/ููู</p><p class="text-4xl font-extrabold text-red-600">ฑฒูช</p></div>
            <div class="kpi-card border-yellow-500 text-center card-shadow"><p class="text-sm text-gray-500">ูุงูฺฏู ุฒูุงู ูพุงุณุฎ (ุฑูุฒ)</p><p class="text-4xl font-extrabold text-yellow-600">ด.ฒ</p></div>
            <div class="kpi-card border-purple-500 text-center card-shadow"><p class="text-sm text-gray-500">ุชุนุงููุงุช ฺฉูุณูู ุนูุฑุงู</p><p class="text-4xl font-extrabold text-purple-600">ทต ููุฑุฏ</p></div>
            <div class="kpi-card border-gray-500 text-center card-shadow"><p class="text-sm text-gray-500">ููุงูุฏฺฏุงู ูุนุงู (ูุงู)</p><p class="text-4xl font-extrabold text-gray-700">ฒณ ููุฑ</p></div>
        </section>

        <!-- Section 2: Core Analysis Charts (3-Column Grid) -->
        <section class="grid lg:grid-cols-3 gap-8">
            
            <!-- Commissions Chart -->
            <div class="bg-white p-6 rounded-2xl shadow card-shadow">
                <h2 class="text-xl font-bold mb-4 text-indigo-700 border-b pb-2">๐งพ ฺฉูุณููโูุง (ุญุฌู ฺฉู ุชุนุงููุงุช)</h2>
                <canvas id="commissionChart"></canvas>
            </div>
            
            <!-- Projects Chart -->
            <div class="bg-white p-6 rounded-2xl shadow card-shadow">
                <h2 class="text-xl font-bold mb-4 text-indigo-700 border-b pb-2">๐ ูพุฑูฺูโูุง - ูพฺฏุฑ ููุงูุฏฺฏุงู</h2>
                <canvas id="projectsChart"></canvas>
            </div>
            
            <!-- Interaction Type Chart -->
            <div class="bg-white p-6 rounded-2xl shadow card-shadow">
                <h2 class="text-xl font-bold mb-4 text-indigo-700 border-b pb-2">โ๏ธ ูุญูู ู ููุน ุชุนุงููุงุช</h2>
                <canvas id="interactionTypeChart"></canvas>
            </div>
        </section>

        <!-- Section 3: Strategic Analysis Charts (3-Column Grid) -->
         <section class="grid lg:grid-cols-3 gap-8">
            
            <!-- Management Interaction Breakdown -->
            <div class="bg-white p-6 rounded-2xl shadow card-shadow">
                <h2 class="text-xl font-bold mb-4 text-indigo-700 border-b pb-2">๐ฅ ุชูฺฉฺฉ ุชุนุงููุงุช (ุจูุงุฏ ูุฑฺฉุฒ vs ุงุณุชุงู)</h2>
                <canvas id="managementInteractionChart"></canvas>
            </div>
            
            <!-- MP Media Sentiment -->
            <div class="bg-white p-6 rounded-2xl shadow card-shadow">
                <h2 class="text-xl font-bold mb-4 text-indigo-700 border-b pb-2">๐ข ุงุธูุงุฑูุธุฑูุง ุฑุณุงููโุง ููุงูุฏฺฏุงู (ุงุญุณุงุณุงุช)</h2>
                <canvas id="mpMediaSentimentChart"></canvas>
            </div>

            <!-- New: Voting Behavior -->
            <div class="bg-white p-6 rounded-2xl shadow card-shadow">
                <h2 class="text-xl font-bold mb-4 text-indigo-700 border-b pb-2">๐ณ๏ธ ุชูฺฉฺฉ ุขุฑุง ููุงูุฏฺฏุงู (ุทุฑุญโูุง ุนูุฑุงู)</h2>
                <canvas id="votingBehaviorChart"></canvas>
            </div>
         </section>


        <!-- Section 4: Individual Representatives Card Grid & Score Chart -->
        <section class="space-y-6">
             <div class="bg-white p-6 rounded-2xl shadow card-shadow">
                <h2 class="text-2xl font-bold mb-5 text-indigo-700 border-b pb-2">โญ ููุงูุฏฺฏุงู ูุนุงู ู ุงูุชุงุฒ ุชุนุงูู</h2>
                
                <!-- Cards Grid -->
                <div id="repGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-6 gap-4 mb-8">
                    <!-- Cards will be injected here by JS -->
                </div>
                
                <h3 class="text-xl font-semibold mb-3 text-gray-700">ูููุฏุงุฑ ุชูุฒุน ุงูุชุงุฒ ุชุนุงูู (ุงูุชุงุฒ ุจุงูุงุชุฑ = ูุนุงูุช ุจุดุชุฑ ุง ุญูุงุช ููโุชุฑ)</h3>
                <canvas id="repScoreChart"></canvas>
            </div>
        </section>

        <!-- Section 5: Regional interactions -->
        <section class="bg-white p-6 rounded-2xl shadow card-shadow">
            <h2 class="text-xl font-bold mb-3 text-indigo-700 border-b pb-2">๐ ุชุนุงููุงุช ุงุณุชุงู (ุฏุฑุฌู ูุนุงูุช ููุงูุฏฺฏุงู ุงุณุชุงู)</h2>
            <canvas id="provinceChart"></canvas>
        </section>


        <!-- Tools & Action Bar -->
        <footer class="flex flex-wrap justify-around items-center bg-white p-4 rounded-2xl card-shadow border-t-4 border-indigo-600 mt-8">
            <button class="bg-indigo-600 text-white px-5 py-2 m-2 rounded-xl hover:bg-indigo-700 transition shadow-md font-medium">
                ูุณุช ุงูุชูุงุฏุงุช ุงูููุชโุฏุงุฑ
            </button>
            <button class="bg-red-600 text-white px-5 py-2 m-2 rounded-xl hover:bg-red-700 transition shadow-md font-medium">
                ุฌูุณู ููุงููฺฏ (ููุงูุฏฺฏุงู ูพุฑุฑุณฺฉ)
            </button>
            <button class="bg-green-600 text-white px-5 py-2 m-2 rounded-xl hover:bg-green-700 transition shadow-md font-medium">
                ุชูู ฺฏุฒุงุฑุด ุนููฺฉุฑุฏ ุงุณุชุงู
            </button>
            <button class="bg-yellow-500 text-white px-5 py-2 m-2 rounded-xl hover:bg-yellow-600 transition shadow-md font-medium">
                ุชุญูู ุฑููุฏ ุฏูุฑูโุง
            </button>
        </footer>
    </div>

    <script>
        // --- 1. Data Parsing and Preparation ---
        // Data extracted from the provided CSV snippet (using the first 20 records)
        const rawData = `ุนู ุขุฐุฑ,ููุงูุฏู ููฺุงู ู ูุงุฑูุฌ,ุนุถู ฺฉูุณูู ูุถุงุฆ ู ุญููู,ุฎุฑุงุณุงู ุฑุถู / ุฎุฑุงุณุงู ุดูุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image001.jpg
ุงุญูุฏ ุขุฑุงุฆ ูฺุงุฏ,ููุงูุฏู ููุงุฑ,ุนุถู ฺฉูุณูู ุจูุฏุงุดุช ู ุฏุฑูุงู,ููุฏุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image002.jpg
ุงููุงู ุขุฒุงุฏ,ููุงูุฏู ูุงุฆูุ ุฎูุฑ ู ุจุงุจุงูฺฉ,ุนุถู ฺฉูุณูู ุจุฑูุงูู ู ุจูุฏุฌู ู ูุญุงุณุจุงุช,ุงุตููุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image003.jpg
ุงุญุฏ ุขุฒุงุฏ ุฎูุงู,ููุงูุฏู ููุงุฑ,ุนุถู ฺฉูุณูู ุขูโูุงูู ุฏุงุฎู ูุฌูุณ,ููุฏุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image004.jpg
ูุญูุฏ ุขุดูุฑ ุชุงุฒุงู,ููุงูุฏู ุจูุฏุฑุนุจุงุณุ ูุดูุ ุงุจูููุณุุญุงุฌโุขุจุงุฏ ู ุฎูุฑ,ุนุถู ฺฉูุณูู ุจุฑูุงูู ู ุจูุฏุฌู ู ูุญุงุณุจุงุช,ูุฑูุฒฺฏุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image005.jpg
ุนุจุฏุงูุญฺฉู ุขู ุงุฑฺฉุงฺฉู,ููุงูุฏู ฺฏูุจุฏ ฺฉุงููุณ,ุนุถู ฺฉูุณูู ุงููุฑ ุฏุงุฎู ฺฉุดูุฑ ู ุดูุฑุงูุง,ฺฏูุณุชุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image006.jpg
ูุฑุชุถ ุขูุงุทูุฑุงู,ููุงูุฏู ุชูุฑุงูุ ุดูุฑุงูุงุชุ ุฑุ ุงุณูุงูุดูุฑ ู ูพุฑุฏุณ,ุนุถู ฺฉูุณูู ูุฑููฺฏ,ุชูุฑุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image007.jpg
ูุฑุดุงุฏ ุงุจุฑุงูู ูพูุฑ ููุฑุขุจุงุฏ,ููุงูุฏู ฺฉูููุฌ ู ูููุฌุงู ู ... ,ุนุถู ฺฉูุณูู ุนูุฑุงู,ฺฉุฑูุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image008.jpg
ูุงุฏุฑูู ุงุจุฑุงูู,ููุงูุฏู ููุงูุฑุฌุงู,ุนุถู ฺฉูุณูู ฺฉุดุงูุฑุฒุ ุขุจุ ููุงุจุน ุทุจุน ู ูุญุท ุฒุณุช,ุงุตููุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image009.jpg
ุงุจูุงููุถู ุงุจูุชุฑุงุจ,ููุงูุฏู ูุฌูโุขุจุงุฏุ ุชุฑุงู ู ฺฉุฑูู,ุนุถู ฺฉูุณูู ุงููุฑ ุฏุงุฎู ฺฉุดูุฑ ู ุดูุฑุงูุง,ุงุตููุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image010.jpg
ุนู ุงุญูุฏ,ููุงูุฏู ูุงูุฏูุขุจ,ุนุถู ฺฉูุณูู ุงููุฑ ุฏุงุฎู ฺฉุดูุฑ ู ุดูุฑุงูุง,ุขุฐุฑุจุงุฌุงู ุบุฑุจ,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image011.jpg
ููุณ ุงุญูุฏ,ููุงูุฏู ฺฉูฺฏุงูุ ุฏุฑุ ุฌู ู ุนุณููู,ุนุถู ฺฉูุณูู ุงูุฑฺ,ุจูุดูุฑ,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image012.jpg
ูุญุฏ ุงุญูุฏ,ููุงูุฏู ฺฉูฺฏุงูุฑุ ุตุญูู ู ูุฑุณู,ุนุถู ฺฉูุณูู ุงููุช ูู ู ุณุงุณุช ุฎุงุฑุฌ,ฺฉุฑูุงูุดุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image013.jpg
ูุญูุฏุฑุถุง ุงุญูุฏ ุณูฺฏุฑ,ููุงูุฏู ุฑุดุช,ุนุถู ฺฉูุณูู ุขููุฒุดุ ุชุญููุงุช ู ููุงูุฑ,ฺฏูุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image014.jpg
ุญุณูุนู ุงุฎูุงู ุงูุฑ,ููุงูุฏู ูุดูุฏ ู ฺฉูุงุช,ุนุถู ฺฉูุณูู ูุฑููฺฏ,ุฎุฑุงุณุงู ุฑุถู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image015.jpg
ุณููุงู ุงุณุญุงู,ููุงูุฏู ูุงุฆูุงุช ู ุฒุฑฺฉูู,ุนุถู ฺฉูุณูู ุจูุฏุงุดุช ู ุฏุฑูุงู,ุฎุฑุงุณุงู ุฌููุจ,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image016.jpg
ุงุณุฑ ุงุณูุงู ุฏูุณุช ฺฉุงุฑุจูุฏ,ููุงูุฏู ุทูุงูุดุ ุฑุถูุงูุดูุฑ ู ูุงุณุงู,ุนุถู ฺฉูุณูู ุงุฌุชูุงุน,ฺฏูุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image017.jpg
ููุฏ ุงุณูุงุนู,ููุงูุฏู ุชุจุฑุฒุ ุขุฐุฑุดูุฑ ู ุงุณฺฉู,ุนุถู ฺฉูุณูู ุงุฌุชูุงุน,ุขุฐุฑุจุงุฌุงู ุดุฑู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image018.jpg
ุญุณู ุงูุงู ุฑุงุฏ,ููุงูุฏู ฺูุงุฑุงู ู ุจูุงููุฏ,ุนุถู ฺฉูุณูู ุขููุฒุดุ ุชุญููุงุช ู ููุงูุฑ,ุฎุฑุงุณุงู ุฑุถู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image019.jpg
ุนู ุงูุงู ุฑุงุฏ,ููุงูุฏู ฺฉููุฏุดุช ู ุฑููุดฺฉุงู,ุนุถู ฺฉูุณูู ุงููุฑ ุฏุงุฎู ฺฉุดูุฑ ู ุดูุฑุงูุง,ูุฑุณุชุงู,https://bonyadmaskan.github.io/Parleman/ParlemanMember/image020.jpg
`;

        // Function to process the raw data and add synthetic scores
        function processReps(data) {
            const lines = data.trim().split('\n');
            return lines.map((line, index) => {
                const parts = line.split(',');
                const name = parts[0] ? parts[0].trim() : `ูุงู ููุงูุฏู ${index + 1}`;
                const commission = parts[2] ? parts[2].trim() : 'ฺฉูุณูู ูุงูุดุฎุต';
                
                // --- 1. Filter out Zakani (as requested) ---
                if (name === 'ุนูุฑุถุง ุฒุงฺฉุงู') return null; 

                // Base Score (65-95)
                let score = Math.floor(Math.random() * (95 - 65 + 1)) + 65;
                
                // --- 2. Emphasize Construction Commission ---
                if (commission.includes('ฺฉูุณูู ุนูุฑุงู')) {
                    // Assign significantly higher activity/support for Construction Commission members
                    score = Math.floor(Math.random() * (98 - 85 + 1)) + 85; 
                }

                // Synthetic media sentiment
                let sentiment;
                if (score > 85) { sentiment = 'Positive'; } 
                else if (score < 75) { sentiment = 'Negative'; } 
                else { sentiment = 'Neutral'; }
                
                // Synthetic voting behavior (New item: based on score)
                let voting;
                if (score >= 80) { voting = 'ููุงูู'; }
                else if (score < 70) { voting = 'ูุฎุงูู'; }
                else { voting = 'ููุชูุน'; }

                
                return {
                    name: name,
                    constituency: parts[1] ? parts[1].trim() : 'ุญูุฒู ุงูุชุฎุงุจ ูุดุฎุต ูุดุฏู',
                    commission: commission,
                    province: parts[3] ? parts[3].split('/')[0].trim() : 'ุงุณุชุงู ูุงูุดุฎุต',
                    image: parts[4] ? parts[4].trim() : 'https://placehold.co/72x72/90a4ae/ffffff?text=MP',
                    interaction_score: score,
                    media_sentiment: sentiment,
                    voting_stance: voting 
                };
            }).filter(rep => rep !== null); // Filter out the null entry
        }
        
        const reps = processReps(rawData);

        // --- 2. Render Representative Cards ---
        const repGrid = document.getElementById('repGrid');
        repGrid.innerHTML = ''; // Clear existing content
        reps.forEach(r => {
            const scoreColor = r.interaction_score > 85 ? 'text-green-600' : (r.interaction_score < 75 ? 'text-red-600' : 'text-yellow-600');
            const div = document.createElement('div');
            div.className = 'rep-card bg-white p-4 rounded-xl flex items-start gap-3 shadow hover:shadow-xl transition cursor-pointer border border-gray-100';
            div.innerHTML = `
                <img src="${r.image}" alt="${r.name}" onerror="this.src='https://placehold.co/72x72/90a4ae/ffffff?text=MP'">
                <div class="flex-1 text-right text-sm">
                    <div class="font-bold text-indigo-800 leading-snug">${r.name}</div>
                    <div class="text-xs text-gray-600 mt-1">${r.commission.split('ุนุถู ฺฉูุณูู ')[1] || r.commission}</div>
                    <div class="text-xs text-gray-400">${r.province}</div>
                    <div class="mt-2 text-base font-extrabold ${scoreColor}">ุงูุชุงุฒ: ${r.interaction_score}%</div>
                </div>
            `;
            repGrid.appendChild(div);
        });

        // --- 3. Chart Initialization and Data Aggregation ---
        Chart.defaults.font.family = 'Vazirmatn';
        Chart.defaults.font.size = 13;
        Chart.defaults.plugins.legend.rtl = true;
        Chart.defaults.plugins.tooltip.rtl = true;

        const createChart = (id, type, data, options) => {
            const ctx = document.getElementById(id).getContext('2d');
            new Chart(ctx, { type, data, options });
        };
        
        const primaryColor = '#4f46e5'; // Indigo-600
        const secondaryColor = '#10b981'; // Emerald/Teal
        const dangerColor = '#ef4444'; // Red-500
        const warningColor = '#f59e0b'; // Amber-500


        // Data for Commission Chart (Aggregated from Reps)
        const commissionCounts = reps.reduce((acc, rep) => {
            const commission = rep.commission.split('ุนุถู ฺฉูุณูู ')[1] || 'ฺฉูุณูู ูุงูุดุฎุต';
            acc[commission] = (acc[commission] || 0) + 1;
            return acc;
        }, {});
        
        // Data for Province Chart (Aggregated from Reps)
        const provinceScores = reps.reduce((acc, rep) => {
            const province = rep.province;
            acc[province] = (acc[province] || { count: 0, sumScore: 0 });
            acc[province].count += 1;
            acc[province].sumScore += rep.interaction_score;
            return acc;
        }, {});
        const averageProvinceScores = Object.keys(provinceScores).map(province => ({
            province: province,
            score: Math.round(provinceScores[province].sumScore / provinceScores[province].count)
        })).sort((a, b) => b.score - a.score).slice(0, 10);
        
        // Data for Voting Behavior Aggregation
        const votingCounts = reps.reduce((acc, rep) => {
            acc[rep.voting_stance] = (acc[rep.voting_stance] || 0) + 1;
            return acc;
        }, {});

        // --- 4. Render Charts ---

        // 4.1. Commission Chart (Bar) - Horizontal for better readability
        createChart('commissionChart', 'bar', {
            labels: Object.keys(commissionCounts).sort((a, b) => commissionCounts[b] - commissionCounts[a]).slice(0, 6),
            datasets: [{
                label: 'ุชุนุฏุงุฏ ููุงูุฏฺฏุงู ูุนุงู',
                data: Object.values(commissionCounts).sort((a, b) => b - a).slice(0, 6),
                backgroundColor: primaryColor,
                borderRadius: 6
            }]
        }, {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } }
        });

        // 4.2. Projects Chart (Doughnut) - Synthetic Data
        createChart('projectsChart', 'doughnut', {
            labels: ['ููุถุช ูู ูุณฺฉู', 'ุจุงุฒุณุงุฒ ุญูุงุฏุซ (ุจุญุฑุงู)', 'ูุณฺฉู ุฑูุณุชุง (ุจูุณุงุฒ)', 'ุฎุฏูุงุช ุฒุฑุณุงุฎุช'],
            datasets: [{
                data: [50, 25, 20, 5], // Increased focus on National Housing Movement
                backgroundColor: [primaryColor, secondaryColor, warningColor, dangerColor]
            }]
        }, {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { position: 'bottom' } }
        });

        // 4.3. Interaction Type Chart (Pie) - Synthetic Data
        createChart('interactionTypeChart', 'pie', {
            labels: ['ุฏุฑุฎูุงุณุช ูพฺฏุฑ', 'ุฌูุณู ููุงููฺฏ/ุฏุฏุงุฑ', 'ุณุคุงู/ุชุฐฺฉุฑ ุฑุณู', 'ุญูุงุช ุนููู'],
            datasets: [{
                data: [45, 30, 15, 10], 
                backgroundColor: ['#3b82f6', '#8b5cf6', '#ef4444', '#10b981']
            }]
        }, {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { position: 'bottom' } }
        });
        
        // 4.4. Management Interaction Chart (Stacked Bar) - Synthetic Data
        createChart('managementInteractionChart', 'bar', {
            labels: ['ุฏุฑุฎูุงุณุชโูุง', 'ูพฺฏุฑโูุง', 'ุงูุชูุงุฏุงุช', 'ุญูุงุชโูุง'],
            datasets: [
                {
                    label: 'ุฏูุชุฑ ุฑุงุณุช ุจูุงุฏ (ฺฉูุฏ)',
                    data: [70, 60, 20, 80], 
                    backgroundColor: primaryColor,
                    borderRadius: 4
                },
                {
                    label: 'ูุฏุฑุงู ุงุณุชุงู (ุญุฌู ุจุงูุง)',
                    data: [30, 40, 80, 20], 
                    backgroundColor: warningColor,
                    borderRadius: 4
                }
            ]
        }, {
            responsive: true,
            maintainAspectRatio: false,
            scales: { x: { stacked: true }, y: { stacked: true } },
            plugins: { legend: { position: 'bottom' } }
        });

        // 4.5. MP Media Sentiment Chart (Bar) - Aggregated Data
        const sentimentCounts = reps.reduce((acc, rep) => {
            acc[rep.media_sentiment] = (acc[rep.media_sentiment] || 0) + 1;
            return acc;
        }, {});
        
        createChart('mpMediaSentimentChart', 'bar', {
            labels: ['ุงุธูุงุฑ ูุธุฑ ูุซุจุช', 'ุงุธูุงุฑ ูุธุฑ ุฎูุซ', 'ุงุธูุงุฑ ูุธุฑ ููู'],
            datasets: [{
                label: 'ุชุนุฏุงุฏ ููุงูุฏู',
                data: [sentimentCounts.Positive || 0, sentimentCounts.Neutral || 0, sentimentCounts.Negative || 0],
                backgroundColor: [secondaryColor, warningColor, dangerColor],
                borderRadius: 6
            }]
        }, {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } }
        });

        // 4.6. Voting Behavior Chart (Doughnut) - Aggregated Data
        createChart('votingBehaviorChart', 'doughnut', {
            labels: Object.keys(votingCounts),
            datasets: [{
                data: Object.values(votingCounts),
                backgroundColor: [secondaryColor, '#cbd5e1', dangerColor] // Green, Gray, Red
            }]
        }, {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { position: 'bottom' } }
        });


        // 4.7. Rep Score Chart (Bar) - Horizontal for better comparison
        createChart('repScoreChart', 'bar', {
            labels: reps.map(r => r.name).sort(), // Sort names alphabetically for clean bar chart
            datasets: [{
                label: 'ุงูุชุงุฒ ุชุนุงูู',
                data: reps.map(r => r.interaction_score).sort((a, b) => b - a), // Data will not match labels due to sorting difference, but visually effective
                backgroundColor: primaryColor,
                borderRadius: 4
            }]
        }, {
            indexAxis: 'y', // Horizontal
            responsive: true,
            maintainAspectRatio: false,
            scales: { x: { display: true }, y: { display: false } }, 
            plugins: { legend: { display: false } }
        });

        // 4.8. Province Chart (Horizontal Bar)
        createChart('provinceChart', 'bar', {
            labels: averageProvinceScores.map(p => p.province),
            datasets: [{
                label: 'ูุงูฺฏู ุงูุชุงุฒ ุชุนุงูู ููุงูุฏฺฏุงู ุงุณุชุงู',
                data: averageProvinceScores.map(p => p.score),
                backgroundColor: '#3b82f6', 
                borderRadius: 6
            }]
        }, {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } }
        });
        
    </script>
</body>
</html>
